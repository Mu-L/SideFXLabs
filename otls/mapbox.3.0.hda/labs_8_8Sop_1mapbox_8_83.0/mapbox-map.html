<!DOCTYPE html><html lang="en">  <head>    <meta charset="UTF-8" />    <title>Map</title>    <script src='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js'></script>    <link href='https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css' rel='stylesheet' />  </head>  <body>    <div id="map" style="width:512px; height:512px;"></div>    <script>      function bootstrap() {        var intervalCount = 0;        var looper = window.setInterval(function() {          intervalCount = intervalCount + 1;          if (window.mapboxgl) {            window.clearInterval(looper);            init();          }          if (intervalCount > 10) {            window.clearInterval(looper);          }        }, 500);      }      function update(map) {        var hash = location.hash.substring(1).split(",");        var center = map.getCenter();        var zoom = map.getZoom();        // Mapbox SOP and the mercantile module expect "zoom" to be         // an integer, but "zoom" from map.getZoom() is a float        var forcedIntZoom = zoom < hash[2] ? Math.floor(zoom) : Math.ceil(zoom);        if (forcedIntZoom != zoom) map.zoomTo(forcedIntZoom, {duration: 200});        bounds = map.getBounds();        location.hash = [center.lng, center.lat, forcedIntZoom, bounds.getNorthEast().lat, bounds.getNorthEast().lng, bounds.getSouthWest().lat, bounds.getSouthWest().lng].join(',');      }      function init() {        var hash = location.hash.substring(1).split(",");        mapboxgl.accessToken = hash[3];        const map = new mapboxgl.Map({          container: 'map',          style: 'mapbox://styles/mapbox/satellite-v9',          center: [hash[0], hash[1]],          zoom: hash[2]        });        map.on('moveend', function() { update(map); });        update(map);      }      if (document.readyState === 'complete') {        bootstrap();      } else {        window.addEventListener('load', bootstrap);      }    </script>  </body></html>